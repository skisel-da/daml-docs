<!-- Copyright (c) 2022 Digital Asset (Switzerland) GmbH and/or its affiliates. All rights reserved. -->
<!-- SPDX-License-Identifier: Apache-2.0 -->



<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!-->
<html class="no-js" lang="en">
<!--<![endif]-->

<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Authorization &mdash; Daml SDK 0.0.0 documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="../_static/js/modernizr.min.js"></script>
  
  
  <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
  <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
  <script src="../_static/jquery.js"></script>
  <script src="../_static/underscore.js"></script>
  <script src="../_static/doctools.js"></script>
  <script src="../_static/clipboard.min.js"></script>
  <script src="../_static/copybutton.js"></script>
  
  <script type="text/javascript" src="../_static/js/theme.js"></script>

  

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/copybutton.css" type="text/css" />
  <link rel="index" title="Index" href="../genindex.html" />
  <link rel="search" title="Search" href="../search.html" />
  <link rel="next" title="The Ledger API" href="ledger-api.html" />
  <link rel="prev" title="Automating the Upgrade Process" href="../upgrade/automation.html" /> 

  
  <link rel="icon" type="image/svg+xml"  href="../_static/images/daml-logo-mark-light.svg">
  <link rel="alternate icon" href="../_static/images/daml-favicon-1.ico">

  <!-- Google Tag Manager -->
  <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
  new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
  j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
  'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
  })(window,document,'script','dataLayer','GTM-MSWJMNX');</script>
  <!-- End Google Tag Manager -->

  
  <!-- Mopinion Pastea.se  start --><script type="text/javascript">(function(){var id="4s6vwov7ad6qyxhq8iwbyhocrsn2nm36k25";var js=document.createElement("script");js.setAttribute("type","text/javascript");js.setAttribute("src","//deploy.mopinion.com/js/pastease.js");js.async=true;document.getElementsByTagName("head")[0].appendChild(js);var t=setInterval(function(){try{new Pastease.load(id);clearInterval(t)}catch(e){}},50)})();</script><!-- Mopinion Pastea.se end -->
</head>

<body class="wy-body-for-nav">
  <!-- Google Tag Manager (noscript) -->
  <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-MSWJMNX"
    height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
  <!-- End Google Tag Manager (noscript) -->
   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-nav-side-shadow"></div>
      <div class="wy-side-scroll">

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
          
          
          
          
          
          <ul>
<li class="toctree-l1"><a class="reference internal" href="../index.html">Daml Documentation</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Getting started</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../getting-started/installation.html">Installing the SDK</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../getting-started/path-variables.html">Setting JAVA_HOME and PATH Variables</a></li>
<li class="toctree-l2"><a class="reference internal" href="../getting-started/manual-download.html">Manually Installing the SDK</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../getting-started/index.html">Building Your App</a></li>
<li class="toctree-l1"><a class="reference internal" href="../getting-started/app-architecture.html">App Architecture</a></li>
<li class="toctree-l1"><a class="reference internal" href="../getting-started/first-feature.html">Your First Feature</a></li>
<li class="toctree-l1"><a class="reference internal" href="../getting-started/testing.html">Testing Your Web App</a></li>
<li class="toctree-l1"><a class="reference external" href="https://docs.daml.com/cheat-sheet">Cheat Sheet</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Writing Daml</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../writing-daml.html">Writing Daml</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../daml/intro/0_Intro.html">An introduction to Daml</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../daml/intro/1_Token.html">1 Basic contracts</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml/intro/2_DamlScript.html">2 Testing templates using Daml Script</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml/intro/3_Data.html">3 Data types</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml/intro/4_Transformations.html">4 Transforming data using choices</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml/intro/5_Restrictions.html">5 Adding constraints to a contract</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml/intro/6_Parties.html">6 Parties and authority</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml/intro/7_Composing.html">7 Composing choices</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml/intro/8_Exceptions.html">8 Exception Handling</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml/intro/9_Dependencies.html">9 Working with Dependencies</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml/intro/10_Functional101.html">10 Functional Programming 101</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml/intro/11_StdLib.html">11 Intro to the Daml Standard Library</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml/intro/12_Testing.html">12 Testing Daml Contracts</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../daml/reference/index.html">Language reference docs</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../daml/reference/structure.html">Overview: template structure</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml/reference/templates.html">Templates</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml/reference/choices.html">Choices</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml/reference/updates.html">Updates</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml/reference/data-types.html">Data types</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml/reference/working-with.html">Built-in functions</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml/reference/expressions.html">Expressions</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml/reference/functions.html">Functions</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml/reference/file-structure.html">File structure</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml/reference/packages.html">Packages</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml/reference/contract-keys.html">Contract keys</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml/reference/exceptions.html">Exceptions</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml/reference/interfaces.html">Interfaces</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../daml/stdlib/index.html">The standard library</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../daml/stdlib/Prelude.html">Prelude</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml/stdlib/DA-Action.html">DA.Action</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml/stdlib/DA-Action-State.html">DA.Action.State</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml/stdlib/DA-Action-State-Class.html">DA.Action.State.Class</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml/stdlib/DA-Assert.html">DA.Assert</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml/stdlib/DA-Bifunctor.html">DA.Bifunctor</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml/stdlib/DA-BigNumeric.html">DA.BigNumeric</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml/stdlib/DA-Date.html">DA.Date</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml/stdlib/DA-Either.html">DA.Either</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml/stdlib/DA-Exception.html">DA.Exception</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml/stdlib/DA-Foldable.html">DA.Foldable</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml/stdlib/DA-Functor.html">DA.Functor</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml/stdlib/DA-List.html">DA.List</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml/stdlib/DA-List-BuiltinOrder.html">DA.List.BuiltinOrder</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml/stdlib/DA-List-Total.html">DA.List.Total</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml/stdlib/DA-Logic.html">DA.Logic</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml/stdlib/DA-Map.html">DA.Map</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml/stdlib/DA-Math.html">DA.Math</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml/stdlib/DA-Monoid.html">DA.Monoid</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml/stdlib/DA-NonEmpty.html">DA.NonEmpty</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml/stdlib/DA-NonEmpty-Types.html">DA.NonEmpty.Types</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml/stdlib/DA-Numeric.html">DA.Numeric</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml/stdlib/DA-Optional.html">DA.Optional</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml/stdlib/DA-Record.html">DA.Record</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml/stdlib/DA-Semigroup.html">DA.Semigroup</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml/stdlib/DA-Set.html">DA.Set</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml/stdlib/DA-Stack.html">DA.Stack</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml/stdlib/DA-Text.html">DA.Text</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml/stdlib/DA-TextMap.html">DA.TextMap</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml/stdlib/DA-Time.html">DA.Time</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml/stdlib/DA-Traversable.html">DA.Traversable</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml/stdlib/DA-Tuple.html">DA.Tuple</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml/stdlib/DA-Validation.html">DA.Validation</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../daml/patterns.html">Good design patterns</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../daml/patterns/initaccept.html">Initiate and Accept</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml/patterns/multiparty-agreement.html">Multiple party agreement</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml/patterns/delegation.html">Delegation</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml/patterns/authorization.html">Authorization</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml/patterns/locking.html">Locking</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../daml/patterns/locking/locking-by-archiving.html">Locking by archiving</a></li>
<li class="toctree-l4"><a class="reference internal" href="../daml/patterns/locking/locking-by-state.html">Locking by state</a></li>
<li class="toctree-l4"><a class="reference internal" href="../daml/patterns/locking/locking-by-safekeeping.html">Locking by safekeeping</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../daml/patterns/legends.html">Diagram legends</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../daml/troubleshooting.html">Troubleshooting</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Building applications</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="../building-applications.html">Building Applications</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="app-arch.html">Application architecture</a></li>
<li class="toctree-l2"><a class="reference internal" href="bindings-ts/index.html">JavaScript Client Libraries</a><ul>
<li class="toctree-l3"><a class="reference internal" href="bindings-ts/daml2js.html">JavaScript Code Generator</a></li>
<li class="toctree-l3"><a class="reference internal" href="bindings-ts/daml-react.html">&#64;daml/react</a></li>
<li class="toctree-l3"><a class="reference internal" href="bindings-ts/daml-ledger.html">&#64;daml/ledger</a></li>
<li class="toctree-l3"><a class="reference internal" href="bindings-ts/daml-types.html">&#64;daml/types</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../json-api/index.html">HTTP JSON API Service</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../json-api/lf-value-specification.html">Daml-LF JSON Encoding</a></li>
<li class="toctree-l3"><a class="reference internal" href="../json-api/search-query-language.html">Query language</a></li>
<li class="toctree-l3"><a class="reference internal" href="../json-api/production-setup.html">Production Setup</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../daml-script/index.html">Daml Script</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../daml-script/api/index.html">Daml Script Library</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../daml-script/api/Daml-Script.html">Daml.Script</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../daml-repl/index.html">Daml REPL</a></li>
<li class="toctree-l2"><a class="reference internal" href="../upgrade/index.html">Upgrading and Extending Daml applications</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../upgrade/extend.html">Extending Daml applications</a><ul class="simple">
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../upgrade/upgrade.html">Upgrading Daml applications</a><ul class="simple">
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../upgrade/automation.html">Automating the Upgrade Process</a></li>
</ul>
</li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Authorization</a></li>
<li class="toctree-l2"><a class="reference internal" href="ledger-api.html">The Ledger API</a><ul>
<li class="toctree-l3"><a class="reference internal" href="services.html">The Ledger API services</a></li>
<li class="toctree-l3"><a class="reference internal" href="grpc/index.html">gRPC</a></li>
<li class="toctree-l3"><a class="reference internal" href="grpc/error-codes.html">Error Codes</a></li>
<li class="toctree-l3"><a class="reference internal" href="grpc/proto-docs.html">Ledger API Reference</a></li>
<li class="toctree-l3"><a class="reference internal" href="grpc/daml-to-ledger-api.html">How Daml types are translated to protobuf</a></li>
<li class="toctree-l3"><a class="reference internal" href="daml-lf-translation.html">How Daml types are translated to Daml-LF</a></li>
<li class="toctree-l3"><a class="reference internal" href="bindings-java/index.html">Java bindings</a><ul>
<li class="toctree-l4"><a class="reference internal" href="bindings-java/codegen.html">Generate Java code from Daml</a></li>
<li class="toctree-l4"><a class="reference internal" href="bindings-java/example.html">Ping Pong Example</a></li>
<li class="toctree-l4"><a class="reference internal" href="bindings-java/quickstart.html">Iou Quickstart Tutorial</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="bindings-x-lang/index.html">Creating your own bindings</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="command-deduplication.html">Command deduplication</a></li>
<li class="toctree-l2"><a class="reference internal" href="../triggers/index.html">Daml Triggers - Off-Ledger Automation in Daml</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../triggers/api/index.html">Daml Trigger Library</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../triggers/api/Daml-Trigger.html">Daml.Trigger</a></li>
<li class="toctree-l4"><a class="reference internal" href="../triggers/api/Daml-Trigger-Assert.html">Daml.Trigger.Assert</a></li>
<li class="toctree-l4"><a class="reference internal" href="../triggers/api/Daml-Trigger-LowLevel.html">Daml.Trigger.LowLevel</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../tools/trigger-service/index.html">Trigger Service</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../tools/trigger-service/authorization.html">Authorization</a></li>
<li class="toctree-l3"><a class="reference internal" href="../tools/trigger-service/auth0_example.html">Auth0 Example Configuration</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../tools/auth-middleware/index.html">Auth Middleware</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../tools/auth-middleware/oauth2.html">OAuth 2.0 Auth Middleware</a></li>
</ul>
</li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Deploying to Daml ledgers</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../deploying.html">Overview of Daml ledgers</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../deploy/generic_ledger.html">Deploying to a generic Daml ledger</a></li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Operating Daml</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../operating-daml.html">Operating Daml</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../ops/pruning.html">Participant Pruning</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ops/metering.html">Participant Metering</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ops/requirements.html">System Requirements</a></li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Developer Tools</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../tools.html">Developer Tools</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../tools/assistant.html">Daml Assistant (<code class="docutils literal notranslate"><span class="pre">daml</span></code>)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../daml/daml-studio.html">Daml Studio</a></li>
<li class="toctree-l2"><a class="reference internal" href="../tools/sandbox.html">Daml Sandbox</a></li>
<li class="toctree-l2"><a class="reference internal" href="../tools/navigator/index.html">Navigator</a></li>
<li class="toctree-l2"><a class="reference internal" href="../tools/codegen.html">Daml codegen</a></li>
<li class="toctree-l2"><a class="reference internal" href="../tools/profiler.html">Daml Profiler</a></li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Background concepts</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../concepts/glossary.html">Glossary of concepts</a></li>
<li class="toctree-l1"><a class="reference internal" href="../concepts/ledger-model/index.html">Daml Ledger Model</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../concepts/ledger-model/ledger-structure.html">Structure</a></li>
<li class="toctree-l2"><a class="reference internal" href="../concepts/ledger-model/ledger-integrity.html">Integrity</a></li>
<li class="toctree-l2"><a class="reference internal" href="../concepts/ledger-model/ledger-privacy.html">Privacy</a></li>
<li class="toctree-l2"><a class="reference internal" href="../concepts/ledger-model/ledger-daml.html">Daml: Defining Contract Models Compactly</a></li>
<li class="toctree-l2"><a class="reference internal" href="../concepts/ledger-model/ledger-exceptions.html">Exceptions</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../concepts/identity-and-package-management.html">Identity and Package Management</a></li>
<li class="toctree-l1"><a class="reference internal" href="../concepts/time.html">Time</a></li>
<li class="toctree-l1"><a class="reference internal" href="../concepts/local-ledger.html">Causality and Local Ledgers</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Examples</span></p>
<ul>
<li class="toctree-l1"><a class="reference external" href="https://daml.com/examples">Examples</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Early Access Features</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../tools/export/index.html">Ledger Export</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tools/visual.html">Visualizing Daml Contracts</a></li>
<li class="toctree-l1"><a class="reference internal" href="../concepts/interoperability.html">Ledger Interoperability</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tools/non-repudiation.html">Non-repudiation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ops/connect/index.html">Operating Daml</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../ops/connect/helm.html">Daml Helm Chart</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ops/connect/auth0.html">Setting Up Auth0</a></li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Daml Ecosystem</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../support/overview.html">Daml Ecosystem Overview</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../support/status-definitions.html">Status Definitions</a></li>
<li class="toctree-l2"><a class="reference internal" href="../support/component-statuses.html">Feature and Component Statuses</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../support/releases.html">Releases and Versioning</a></li>
<li class="toctree-l1"><a class="reference internal" href="../support/compatibility.html">Portability, Compatibility, and Support Durations</a></li>
<li class="toctree-l1"><a class="reference internal" href="../support/support.html">Getting Help</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../canton-refs.html">Dummy Canton Refs</a></li>
</ul>

          
          
          
          <div class="pdf-download"><a href="../_downloads/DigitalAssetSDK.pdf" download>Download as PDF</a></div>
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <div class="topbar fixed">
        
        <nav class="wy-nav-top" aria-label="top navigation">
          
          <i data-toggle="wy-nav-top" class="wy-nav-top-toggle"></i>
          
        </nav>
        <!-- Copyright (c) 2022 Digital Asset (Switzerland) GmbH and/or its affiliates. All rights reserved. -->
<!-- SPDX-License-Identifier: Apache-2.0 -->

<div class="navbar">
    <h1><img src="../_static/images/Daml_Logo_Blue.svg"></h1>
    <div class="navbar-menu">
        <div class="da-menu-item da-menu-depth-1" role="menu">
            <a href="https://www.digitalasset.com/developers" role="menuitem" class="da-menu-link">Developers</a>
        </div>
        <div class="da-menu-item da-menu-depth-1" role="menu">
            <a href="https://www.digitalasset.com/products" role="menuitem" class="da-menu-link">Products</a>
        </div>
        <div class="da-menu-item da-menu-depth-1" role="menu">
            <a href="https://www.digitalasset.com" role="menuitem" class="da-menu-link">Company</a>
        </div>
    </div>
</div>

        <div class="version ">
          <span class="hide-mobile">Version&nbsp;</span><span class="version_switcher_placeholder"></span>
          
        </div>


        <!-- Copyright (c) 2022 Digital Asset (Switzerland) GmbH and/or its affiliates. All rights reserved. -->
<!-- SPDX-License-Identifier: Apache-2.0 -->
<div class="search-inline">
    <div id="rtd-search-inline-form" class="wy-form">
        <input type="text" class="search-inline-input" placeholder="Search" name="q">
        <img src="../_static/images/Search.svg" class="search-inline-img"/>
    </div>
    <div class="search-alert">
        Please enter at least 3 letters.
    </div>
    <div id="search-inline-results" class="search-inline-results">
        
    </div>
</div>
          <!-- Copyright (c) 2022 Digital Asset (Switzerland) GmbH and/or its affiliates. All rights reserved. -->
<!-- SPDX-License-Identifier: Apache-2.0 -->

<div class="content-menu collapsed">
    <span class="content-menu-title">In This Section</span>
    <span class="content-menu-expand"></span>
    <div class="content-menu-wrapper">
        
        <!-- Local TOC -->
        <div class="content-menu-toc"><ul>
<li><a class="reference internal" href="#">Authorization</a><ul>
<li><a class="reference internal" href="#introduction">Introduction</a></li>
<li><a class="reference internal" href="#acquiring-and-using-access-tokens">Acquiring and using access tokens</a></li>
<li><a class="reference internal" href="#access-tokens-and-rights">Access tokens and rights</a></li>
<li><a class="reference internal" href="#access-token-formats">Access token formats</a><ul>
<li><a class="reference internal" href="#user-access-tokens">User access tokens</a></li>
<li><a class="reference internal" href="#custom-daml-claims-access-tokens">Custom Daml claims access tokens</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
        
    </div>
</div>
        

      </div>
      <div class="wy-nav-content">
        
        <div class="rst-content">
          
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div itemprop="articleBody">
                
  <div class="section" id="authorization">
<span id="id1"></span><h1>Authorization<a class="headerlink" href="#authorization" title="Permalink to this headline">¶</a></h1>
<p>When developing Daml applications using SDK tools,
your local setup will most likely not perform any Ledger API request authorization –
by default, any valid Ledger API request will be accepted by the sandbox.</p>
<p>This is not the case for participant nodes of <a class="reference internal" href="../deploying.html"><span class="doc">deployed ledgers</span></a>.
They check for every Ledger API request whether the request contains an access token that is valid and sufficient to authorize the request.
You thus need to add support for authorization using access token to your application to run it against a deployed ledger.</p>
<p>For the</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">In case of mutual (two-way) TLS authentication, the Ledger API
client must present its certificate (in addition to an access token) to
the Ledger API server as part of the authentication process. The provided
certificate must be signed by a certificate authority (CA) trusted
by the Ledger API server. Note that the identity of the application
will not be proven by using this method, i.e. the <cite>application_id</cite> field in the request
is not necessarily correlated with the CN (Common Name) in the certificate.</p>
</div>
<div class="section" id="introduction">
<h2>Introduction<a class="headerlink" href="#introduction" title="Permalink to this headline">¶</a></h2>
<p>Your Daml application sends requests to the <a class="reference internal" href="ledger-api.html"><span class="doc">Ledger API</span></a> exposed by a participant node to submit changes to the ledger
(e.g., “<em>exercise choice X on contract Y as party Alice</em>”), or to read data from the ledger
(e.g., “<em>read all active contracts visible to party Alice</em>”).
Your application might send these requests via a middleware like the <a class="reference internal" href="../json-api/index.html"><span class="doc">JSON API</span></a>.</p>
<p>Whether a participant node <em>can</em> serve such a request depends on whether the participant node hosts the respective parties, and
whether the request is valid according to the <a class="reference internal" href="../concepts/ledger-model/index.html#da-ledgers"><span class="std std-ref">Daml Ledger Model</span></a>.
Whether a participant node <em>will</em> serve such a request to a Daml application depends on whether the
request includes an access token that is valid and sufficient to authorize the request for this participant node.</p>
</div>
<div class="section" id="acquiring-and-using-access-tokens">
<h2>Acquiring and using access tokens<a class="headerlink" href="#acquiring-and-using-access-tokens" title="Permalink to this headline">¶</a></h2>
<p>How an application should acquire access tokens depends on the participant node it talks to and is ultimately setup by the participant node operator.
Many setups use a flow in the style of <a class="reference external" href="https://oauth.net/2/">OAuth 2.0</a>:</p>
<p>First, the Daml application contacts a token issuer to get an access token.
The token issuer verifies the identity of the requesting application, looks up the privileges of the application,
and generates a signed access token describing those privileges.</p>
<p>Then, the Daml application sends the access token along with every Ledger API request.
The Daml ledger verifies the signature of the token to make sure it has not been tampered with and was issued by one of its trusted token issuers,
and then checks that the token has not yet expired and that the privileges described in the token authorize the given Ledger API request.</p>
<img alt="../_images/Authentication.svg" src="../_images/Authentication.svg" /><p>As shown above, using access tokens requires your application to attach them to every request.
How to do that depends on the tool or library you use to interact with the Ledger API.
See the tool’s or library’s documentation for more information.
Here is for example the relevant documentation for
the <a class="reference internal" href="bindings-java/index.html#ledger-api-java-bindings-authorization"><span class="std std-ref">Java bindings</span></a>
and the <a class="reference internal" href="../json-api/index.html#json-api-access-tokens"><span class="std std-ref">JSON API</span></a>.</p>
</div>
<div class="section" id="access-tokens-and-rights">
<span id="authorization-claims"></span><h2>Access tokens and rights<a class="headerlink" href="#access-tokens-and-rights" title="Permalink to this headline">¶</a></h2>
<p>Access tokens contain information about the rights granted to the bearer of the token. These rights are specific to the API being accessed.</p>
<p>The Daml Ledger API uses the following rights to govern request authorization:</p>
<ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">public</span></code>: the right to retrieve publicly available information, such as the ledger identity</li>
<li><code class="docutils literal notranslate"><span class="pre">participant_admin</span></code>: the right to adminstrate the participant node</li>
<li><code class="docutils literal notranslate"><span class="pre">canReadAs(p)</span></code>: the right to read information off the ledger (like the active contracts) visible to the party <code class="docutils literal notranslate"><span class="pre">p</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">canActsAs(p)</span></code>: same as <code class="docutils literal notranslate"><span class="pre">canReadAs(p)</span></code>, with the added right of issuing commands on behalf of the party <code class="docutils literal notranslate"><span class="pre">p</span></code></li>
</ul>
<p>The following table summarizes the rights required to access each Ledger API endpoint:</p>
<table border="1" class="docutils align-default">
<colgroup>
<col width="31%" />
<col width="23%" />
<col width="46%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Ledger API service</th>
<th class="head">Endpoint</th>
<th class="head">Required right</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>LedgerIdentityService</td>
<td>GetLedgerIdentity</td>
<td>public</td>
</tr>
<tr class="row-odd"><td>ActiveContractsService</td>
<td>GetActiveContracts</td>
<td>for each requested party p: canReadAs(p)</td>
</tr>
<tr class="row-even"><td rowspan="2">CommandCompletionService</td>
<td>CompletionEnd</td>
<td>public</td>
</tr>
<tr class="row-odd"><td>CompletionStream</td>
<td>for each requested party p: canReadAs(p)</td>
</tr>
<tr class="row-even"><td>CommandSubmissionService</td>
<td>Submit</td>
<td>for submitting party p: canActAs(p)</td>
</tr>
<tr class="row-odd"><td>CommandService</td>
<td>All</td>
<td>for submitting party p: canActAs(p)</td>
</tr>
<tr class="row-even"><td>Health</td>
<td>All</td>
<td>no access token required for health checking</td>
</tr>
<tr class="row-odd"><td>LedgerConfigurationService</td>
<td>GetLedgerConfiguration</td>
<td>public</td>
</tr>
<tr class="row-even"><td>MeteringReportService</td>
<td>All</td>
<td>participant_admin</td>
</tr>
<tr class="row-odd"><td>PackageService</td>
<td>All</td>
<td>public</td>
</tr>
<tr class="row-even"><td>PackageManagementService</td>
<td>All</td>
<td>participant_admin</td>
</tr>
<tr class="row-odd"><td>PartyManagementService</td>
<td>All</td>
<td>participant_admin</td>
</tr>
<tr class="row-even"><td>ParticipantPruningService</td>
<td>All</td>
<td>participant_admin</td>
</tr>
<tr class="row-odd"><td>ServerReflection</td>
<td>All</td>
<td>no access token required for gRPC service reflection</td>
</tr>
<tr class="row-even"><td rowspan="2">TimeService</td>
<td>GetTime</td>
<td>public</td>
</tr>
<tr class="row-odd"><td>SetTime</td>
<td>participant_admin</td>
</tr>
<tr class="row-even"><td rowspan="2">TransactionService</td>
<td>LedgerEnd</td>
<td>public</td>
</tr>
<tr class="row-odd"><td>All (except LedgerEnd)</td>
<td>for each requested party p: canReadAs(p)</td>
</tr>
<tr class="row-even"><td rowspan="3">UserManagementService</td>
<td>All</td>
<td>participant_admin</td>
</tr>
<tr class="row-odd"><td>GetUser</td>
<td>authenticated users can get their own user</td>
</tr>
<tr class="row-even"><td>ListUserRights</td>
<td>authenticated users can list their own rights</td>
</tr>
<tr class="row-odd"><td>VersionService</td>
<td>All</td>
<td>public</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="access-token-formats">
<span id="id2"></span><h2>Access token formats<a class="headerlink" href="#access-token-formats" title="Permalink to this headline">¶</a></h2>
<p>Applications should treat access tokens as opaque blobs.
However as an application developer it can be helpful to understand the format of access tokens to debug problems.</p>
<p>All Daml ledgers represent access tokens as <a class="reference external" href="https://datatracker.ietf.org/doc/html/rfc7519">JSON Web Tokens (JWTs)</a>,
and there are two formats of the JSON payload in use by Daml ledgers.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">To generate access tokens for testing purposes, you can use the <a class="reference external" href="https://jwt.io/">jwt.io</a> web site.</p>
</div>
<div class="section" id="user-access-tokens">
<h3>User access tokens<a class="headerlink" href="#user-access-tokens" title="Permalink to this headline">¶</a></h3>
<p>Daml ledgers that support participant <a class="reference internal" href="services.html#user-management-service"><span class="std std-ref">user management</span></a> also accept user access tokens.
They are useful for scenarios where an application’s rights change dynamically over the application’s lifetime.</p>
<p>User access tokens do not encode rights directly like the custom Daml claims tokens explained in the following sections.
Instead, user access tokens encode the participant user on whose behalf the request is issued.</p>
<p>When handling such requests, participant nodes look up the participant user’s current rights
before checking request authorization per the  <a class="reference internal" href="#authorization-claims"><span class="std std-ref">table above</span></a>.
Thus the rights granted to an application can be changed dynamically using
the participant user management service <em>without</em> issuing new access tokens,
as would be required for the custom Daml claims tokens explained below.</p>
<p>User access tokens are <a class="reference external" href="https://datatracker.ietf.org/doc/html/rfc7519">JWTs</a> that follow the
<a class="reference external" href="https://datatracker.ietf.org/doc/html/rfc6749">OAuth 2.0 standard</a> with a JSON payload of the following format.</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
   <span class="nt">&quot;aud&quot;</span><span class="p">:</span> <span class="s2">&quot;someParticipantId&quot;</span><span class="p">,</span>
   <span class="nt">&quot;sub&quot;</span><span class="p">:</span> <span class="s2">&quot;someUserId&quot;</span><span class="p">,</span>
   <span class="nt">&quot;exp&quot;</span><span class="p">:</span> <span class="mi">1300819380</span>
   <span class="nt">&quot;scope&quot;</span><span class="p">:</span> <span class="s2">&quot;daml_ledger_api&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
<p>The above notations are explained below:</p>
<ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">aud</span></code> is an optional field, which restricts the token to participant nodes with the given id</li>
<li><code class="docutils literal notranslate"><span class="pre">sub</span></code> is a required field, which specifies the participant user’s id</li>
<li><code class="docutils literal notranslate"><span class="pre">exp</span></code> is an optional field, which specifies the JWT expiration date (in seconds since EPOCH)</li>
<li><code class="docutils literal notranslate"><span class="pre">scope</span></code> is a space-separated list of <a class="reference external" href="https://datatracker.ietf.org/doc/html/rfc6749#section-3.3">OAuth 2.0 scopes</a>
that must contain the <code class="docutils literal notranslate"><span class="pre">&quot;daml_ledger_api&quot;</span></code> scope</li>
</ul>
</div>
<div class="section" id="custom-daml-claims-access-tokens">
<h3>Custom Daml claims access tokens<a class="headerlink" href="#custom-daml-claims-access-tokens" title="Permalink to this headline">¶</a></h3>
<p>This format represents the <a class="reference internal" href="#authorization-claims"><span class="std std-ref">rights</span></a> granted by the access token as custom claims in the JWT’s payload, like so:</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
   <span class="nt">&quot;https://daml.com/ledger-api&quot;</span><span class="p">:</span> <span class="p">{</span>
     <span class="nt">&quot;ledgerId&quot;</span><span class="p">:</span> <span class="kc">null</span><span class="p">,</span>
     <span class="nt">&quot;participantId&quot;</span><span class="p">:</span> <span class="s2">&quot;123e4567-e89b-12d3-a456-426614174000&quot;</span><span class="p">,</span>
     <span class="nt">&quot;applicationId&quot;</span><span class="p">:</span> <span class="kc">null</span><span class="p">,</span>
     <span class="nt">&quot;admin&quot;</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
     <span class="nt">&quot;actAs&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;Alice&quot;</span><span class="p">],</span>
     <span class="nt">&quot;readAs&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;Bob&quot;</span><span class="p">]</span>
   <span class="p">},</span>
   <span class="nt">&quot;exp&quot;</span><span class="p">:</span> <span class="mi">1300819380</span>
<span class="p">}</span>
</pre></div>
</div>
<p>where all of the fields are optional, and if present,</p>
<ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">ledgerId</span></code> and <code class="docutils literal notranslate"><span class="pre">participantId</span></code> restrict the validity of the token to the given ledger or participant node</li>
<li><code class="docutils literal notranslate"><span class="pre">applicationId</span></code> requires requests with this token to use that application id or not set an application id at all, which should be used to distinguish requests from different applications</li>
<li><code class="docutils literal notranslate"><span class="pre">exp</span></code> is the standard JWT expiration date (in seconds since EPOCH)</li>
<li><code class="docutils literal notranslate"><span class="pre">actAs</span></code>, <code class="docutils literal notranslate"><span class="pre">readAs</span></code> and (participant) <code class="docutils literal notranslate"><span class="pre">admin</span></code> encode the rights granted by this access token</li>
</ul>
<p>The <code class="docutils literal notranslate"><span class="pre">public</span></code> right is implicitly granted to any request bearing a non-expired JWT issued by a trusted issuer with matching <code class="docutils literal notranslate"><span class="pre">ledgerId</span></code>, <code class="docutils literal notranslate"><span class="pre">participantId</span></code> and <code class="docutils literal notranslate"><span class="pre">applicationId</span></code> values.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">All Daml ledgers also support a deprecated legacy format of custom Daml claims
access tokens whose format is equal to the above except for the custom claims
to be present at the same level as <code class="docutils literal notranslate"><span class="pre">exp</span></code> in the token above,
instead of being nested below <code class="docutils literal notranslate"><span class="pre">&quot;https://daml.com/ledger-api&quot;</span></code>.</p>
</div>
</div>
</div>
</div>


              
            </div>
            
            
              <!-- Copyright (c) 2022 Digital Asset (Switzerland) GmbH and/or its affiliates. All rights reserved. -->
<!-- SPDX-License-Identifier: Apache-2.0 -->

<footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../upgrade/automation.html" class="da-btn da-btn-label btn-prev" title="Automating the Upgrade Process" accesskey="p" rel="prev">Previous</a>
      
      
        <a href="ledger-api.html" class="da-btn da-btn-label btn-next" title="The Ledger API" accesskey="n" rel="next">Next</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        Copyright (c) 2022 Digital Asset (Switzerland) GmbH and/or its affiliates. All rights reserved. Any unauthorized use, duplication or distribution is strictly prohibited. &#34;Digital Asset&#34; and &#34;Daml&#34; are Registered in the U.S. Patent and Trademark Office.

    </p>
  </div> 

</footer>
            
          </div>
        </div>
      </div>
    </section>
  </div>

  <!-- Copyright (c) 2022 Digital Asset (Switzerland) GmbH and/or its affiliates. All rights reserved. -->
<!-- SPDX-License-Identifier: Apache-2.0 -->





  <script type="text/javascript">
    jQuery(function () {
      SphinxRtdTheme.Navigation.enable(true);
      });
  </script>


  
    
  
  <div id="inpageContent"></div>
  

</body>
</html>