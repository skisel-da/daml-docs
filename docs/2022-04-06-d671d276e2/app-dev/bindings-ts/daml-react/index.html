<!DOCTYPE html><html class="default"><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="IE=edge"/><title></title><meta name="description" content="Documentation for "/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="stylesheet" href="assets/style.css"/><link rel="stylesheet" href="assets/highlight.css"/><script async src="assets/search.js" id="search-script"></script></head><body><script>document.body.classList.add(localStorage.getItem("tsd-theme") || "os")</script><header><div class="tsd-page-toolbar"><div class="container"><div class="table-wrap"><div class="table-cell" id="tsd-search" data-base="."><div class="field"><label for="tsd-search-field" class="tsd-widget search no-caption">Search</label><input type="text" id="tsd-search-field"/></div><ul class="results"><li class="state loading">Preparing search index...</li><li class="state failure">The search index is not available</li></ul><a href="index.html" class="title"></a></div><div class="table-cell" id="tsd-widgets"><div id="tsd-filter"><a href="#" class="tsd-widget options no-caption" data-toggle="options">Options</a><div class="tsd-filter-group"><div class="tsd-select" id="tsd-filter-visibility"><span class="tsd-select-label">All</span><ul class="tsd-select-list"><li data-value="public">Public</li><li data-value="protected">Public/Protected</li><li data-value="private" class="selected">All</li></ul></div> <input type="checkbox" id="tsd-filter-inherited" checked/><label class="tsd-widget" for="tsd-filter-inherited">Inherited</label><input type="checkbox" id="tsd-filter-externals" checked/><label class="tsd-widget" for="tsd-filter-externals">Externals</label></div></div><a href="#" class="tsd-widget menu no-caption" data-toggle="menu">Menu</a></div></div></div></div><div class="tsd-page-title"><div class="container"><h1></h1></div></div></header><div class="container container-main"><div class="row"><div class="col-8 col-content"><div class="tsd-panel tsd-typography">
<a href="#damlreact" id="damlreact" style="color: inherit; text-decoration: none;">
  <h1>@daml/react</h1>
</a>
<blockquote>
<p>React framework for Daml applications</p>
</blockquote>

<a href="#documentation" id="documentation" style="color: inherit; text-decoration: none;">

</a>


<a href="#usage" id="usage" style="color: inherit; text-decoration: none;">
  <h2>Usage</h2>
</a>
<p>The best way to get you started quickly is to use the <code>create-daml-app</code> template:</p>
<pre><code><span class="hl-0">daml</span><span class="hl-1"> </span><span class="hl-2">new</span><span class="hl-1"> --</span><span class="hl-0">template</span><span class="hl-1">=</span><span class="hl-0">create</span><span class="hl-1">-</span><span class="hl-0">daml</span><span class="hl-1">-</span><span class="hl-0">app</span><span class="hl-1"> </span><span class="hl-0">my</span><span class="hl-1">-</span><span class="hl-0">project</span><span class="hl-1">-</span><span class="hl-0">name</span>
</code></pre>
<p>and to read the <a href="https://docs.daml.com/getting-started/quickstart.html">Quickstart Guide</a>.</p>
<p>To get an overview on how to build a Daml application, please read the <a href="https://docs.daml.com/app-dev/app-arch.html">application architecture overview</a>.</p>
<p>To use <code>@daml/react</code> your application needs to be connected to the JSON API of a Daml ledger. If
your JSON API server for the ledger runs on the local host on port 7575, set</p>
<pre><code class="language-json"><span class="hl-3">&quot;proxy&quot;</span><span class="hl-1">: </span><span class="hl-3">&quot;http://localhost:7575&quot;</span>
</code></pre>
<p>in your <code>package.json</code> and wrap your main component in the <code>DamlLedger</code> component of <code>@daml/react</code></p>
<pre><code class="language-typescript"><span class="hl-4">import</span><span class="hl-1"> </span><span class="hl-0">DamlLedger</span><span class="hl-1"> </span><span class="hl-4">from</span><span class="hl-1"> @</span><span class="hl-0">daml</span><span class="hl-1">/</span><span class="hl-0">react</span><br/><br/><span class="hl-2">const</span><span class="hl-1"> </span><span class="hl-5">App</span><span class="hl-1">: </span><span class="hl-6">React</span><span class="hl-1">.</span><span class="hl-6">FC</span><span class="hl-1"> = () </span><span class="hl-2">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">     &lt;</span><span class="hl-0">DamlLedger</span><br/><span class="hl-1">      </span><span class="hl-7">token</span><span class="hl-1">: &lt;</span><span class="hl-6">your</span><span class="hl-1"> </span><span class="hl-6">authentication</span><span class="hl-1"> </span><span class="hl-6">token</span><span class="hl-1">&gt;</span><br/><span class="hl-1">      </span><span class="hl-0">httpBaseUrl</span><span class="hl-1">?: &lt;</span><span class="hl-6">optional</span><span class="hl-1"> </span><span class="hl-6">http</span><span class="hl-1"> </span><span class="hl-6">base</span><span class="hl-1"> </span><span class="hl-6">url</span><span class="hl-1">&gt;</span><br/><span class="hl-1">      </span><span class="hl-0">wsBaseUrl</span><span class="hl-1">?: &lt;</span><span class="hl-6">optional</span><span class="hl-1"> </span><span class="hl-6">websocket</span><span class="hl-1"> </span><span class="hl-6">base</span><span class="hl-1"> </span><span class="hl-6">url</span><span class="hl-1">&gt;</span><br/><span class="hl-1">      </span><span class="hl-0">reconnectThreshold</span><span class="hl-1">?: &lt;</span><span class="hl-6">optional</span><span class="hl-1"> </span><span class="hl-6">delay</span><span class="hl-1"> </span><span class="hl-6">in</span><span class="hl-1"> </span><span class="hl-6">ms</span><span class="hl-1">&gt;</span><br/><span class="hl-1">      </span><span class="hl-7">party</span><span class="hl-1">: &lt;</span><span class="hl-6">the</span><span class="hl-1"> </span><span class="hl-6">logged</span><span class="hl-1"> </span><span class="hl-6">in</span><span class="hl-1"> </span><span class="hl-6">party</span><span class="hl-1">&gt;</span><br/><span class="hl-1">    &gt;</span><br/><span class="hl-1">      &lt;</span><span class="hl-0">MainScreen</span><span class="hl-1"> /&gt;</span><br/><span class="hl-1">    &lt;/</span><span class="hl-0">DamlLedger</span><span class="hl-1">&gt;</span><br/><span class="hl-1">};</span>
</code></pre>
<p>Now you can use the following React hooks to interact with a Daml ledger:</p>

<a href="#useparty" id="useparty" style="color: inherit; text-decoration: none;">
  <h2><code>useParty</code></h2>
</a>
<p><code>useParty</code> returns the party, for which commands are currently send to the ledger.</p>
<pre><code class="language-typescript"><span class="hl-2">const</span><span class="hl-1"> </span><span class="hl-8">party</span><span class="hl-1"> = </span><span class="hl-5">useParty</span><span class="hl-1">();</span>
</code></pre>

<a href="#useledger" id="useledger" style="color: inherit; text-decoration: none;">
  <h2><code>useLedger</code></h2>
</a>
<p><code>useLedger</code> returns an instance of the <code>Ledger</code> class of <a href="https://docs.daml.com/app-dev/bindings-ts/daml-ledger/index.html">@daml/ledger</a> to interact with the Daml
ledger.</p>
<pre><code class="language-typescript"><span class="hl-2">const</span><span class="hl-1"> </span><span class="hl-8">ledger</span><span class="hl-1"> = </span><span class="hl-5">useLedger</span><span class="hl-1">();</span><br/><span class="hl-2">const</span><span class="hl-1"> </span><span class="hl-8">newContract</span><span class="hl-1"> = </span><span class="hl-4">await</span><span class="hl-1"> </span><span class="hl-0">ledger</span><span class="hl-1">.</span><span class="hl-5">create</span><span class="hl-1">(</span><span class="hl-0">ContractTemplate</span><span class="hl-1">, </span><span class="hl-2">arguments</span><span class="hl-1">);</span><br/><span class="hl-2">const</span><span class="hl-1"> </span><span class="hl-8">archiveEvent</span><span class="hl-1"> = </span><span class="hl-4">await</span><span class="hl-1"> </span><span class="hl-0">Ledger</span><span class="hl-1">.</span><span class="hl-5">archive</span><span class="hl-1">(</span><span class="hl-0">ContractTemplate</span><span class="hl-1">, </span><span class="hl-0">contractId</span><span class="hl-1">);</span><br/><span class="hl-2">const</span><span class="hl-1"> [</span><span class="hl-8">choiceReturnValue</span><span class="hl-1">, </span><span class="hl-8">events</span><span class="hl-1">] = </span><span class="hl-4">await</span><span class="hl-1"> </span><span class="hl-0">ledger</span><span class="hl-1">.</span><span class="hl-5">exercise</span><span class="hl-1">(</span><span class="hl-0">ContractChoice</span><span class="hl-1">, </span><span class="hl-0">contractId</span><span class="hl-1">, </span><span class="hl-0">choiceArguments</span><span class="hl-1">);</span>
</code></pre>

<a href="#usequery" id="usequery" style="color: inherit; text-decoration: none;">
  <h2><code>useQuery</code></h2>
</a>
<p><code>useQuery</code> returns the contracts matching a given query. The query matches for a given contract
template and specified field values of the contracts of that template.</p>
<pre><code class="language-typescript"><span class="hl-2">const</span><span class="hl-1"> {</span><span class="hl-8">contracts</span><span class="hl-1">, </span><span class="hl-8">loading</span><span class="hl-1">} = </span><span class="hl-5">useQuery</span><span class="hl-1">(</span><span class="hl-0">ContractTemplate</span><span class="hl-1">, () </span><span class="hl-2">=&gt;</span><span class="hl-1"> {</span><span class="hl-7">field</span><span class="hl-1">: </span><span class="hl-0">value</span><span class="hl-1">}, [</span><span class="hl-0">dependency1</span><span class="hl-1">,</span><br/><span class="hl-0">dependency2</span><span class="hl-1">, ...]);</span>
</code></pre>
<p>If the query is omitted, all visible contracts of the given template are returned.</p>
<pre><code class="language-typescript"><span class="hl-2">const</span><span class="hl-1"> {</span><span class="hl-8">contracts</span><span class="hl-1">, </span><span class="hl-8">loading</span><span class="hl-1">} = </span><span class="hl-5">useQuery</span><span class="hl-1">(</span><span class="hl-0">ContractTemplate</span><span class="hl-1">);</span>
</code></pre>

<a href="#usereload" id="usereload" style="color: inherit; text-decoration: none;">
  <h2><code>useReload</code></h2>
</a>
<p><code>useReload</code> returns a function to reload the results of queries.</p>
<pre><code class="language-typescript"><span class="hl-2">const</span><span class="hl-1"> </span><span class="hl-8">reload</span><span class="hl-1"> = </span><span class="hl-5">useReload</span><span class="hl-1">();</span><br/><span class="hl-2">const</span><span class="hl-1"> </span><span class="hl-8">onClick</span><span class="hl-1"> = </span><span class="hl-0">reload</span><span class="hl-1">;</span>
</code></pre>

<a href="#usestreamquery" id="usestreamquery" style="color: inherit; text-decoration: none;">
  <h2><code>useStreamQuery</code></h2>
</a>
<blockquote>
<p>Deprecated: prefer <code>useStreamQueries</code></p>
</blockquote>
<p><code>useStreamQuery</code> has the same signature as <code>useQuery</code>, but it constantly refreshes the results.</p>
<pre><code class="language-typescript"><span class="hl-2">const</span><span class="hl-1"> {</span><span class="hl-8">contracts</span><span class="hl-1">, </span><span class="hl-8">loading</span><span class="hl-1">} = </span><span class="hl-5">useStreamQuery</span><span class="hl-1">(</span><span class="hl-0">ContractTemplate</span><span class="hl-1">, () </span><span class="hl-2">=&gt;</span><span class="hl-1"> {</span><span class="hl-7">field</span><span class="hl-1">: </span><span class="hl-0">value</span><span class="hl-1">}, [</span><span class="hl-0">dependency1</span><span class="hl-1">,</span><br/><span class="hl-0">dependency2</span><span class="hl-1">, ...]);</span>
</code></pre>
<p>If the query is omitted, all visible contracts of the given template are returned.</p>
<pre><code class="language-typescript"><span class="hl-2">const</span><span class="hl-1"> {</span><span class="hl-8">contracts</span><span class="hl-1">, </span><span class="hl-8">loading</span><span class="hl-1">} = </span><span class="hl-5">useStreamQuery</span><span class="hl-1">(</span><span class="hl-0">ContractTemplate</span><span class="hl-1">);</span>
</code></pre>

<a href="#usestreamqueries" id="usestreamqueries" style="color: inherit; text-decoration: none;">
  <h2><code>useStreamQueries</code></h2>
</a>
<p><code>useStreamQueries</code> is similar to <code>useQuery</code>, except that:</p>
<ul>
<li>It constantly refreshes the results.</li>
<li>The factory function is expected to return a list of queries, and the
resulting set of contracts is the union of all the contracts that match at
least one query.</li>
<li>Like <code>useQuery</code>, if no factory function is provided, or if the provided
function returns an empty array, the set will contain all contracts of that
template.</li>
</ul>
<pre><code class="language-typescript"><span class="hl-2">const</span><span class="hl-1"> {</span><span class="hl-8">contracts</span><span class="hl-1">, </span><span class="hl-8">loading</span><span class="hl-1">} = </span><span class="hl-5">useStreamQueries</span><span class="hl-1">(</span><span class="hl-0">ContractTemplate</span><span class="hl-1">,</span><br/><span class="hl-1">                                              () </span><span class="hl-2">=&gt;</span><span class="hl-1"> [{</span><span class="hl-0">field:</span><span class="hl-1"> </span><span class="hl-0">value</span><span class="hl-1">}, ...],</span><br/><span class="hl-1">                                              [</span><span class="hl-0">dependency1</span><span class="hl-1">, </span><span class="hl-0">dependency2</span><span class="hl-1">, ...]);</span>
</code></pre>
<p>You can additionally pass in an extra function to handle WebSocket connection
failures.</p>

<a href="#usefetchbykey" id="usefetchbykey" style="color: inherit; text-decoration: none;">
  <h2><code>useFetchByKey</code></h2>
</a>
<p><code>useFetchByKey</code> returns the unique contract of a given template and a given contract key.</p>
<pre><code class="language-typescript"><span class="hl-2">const</span><span class="hl-1"> {</span><span class="hl-8">contract</span><span class="hl-1">, </span><span class="hl-8">loading</span><span class="hl-1">} = </span><span class="hl-5">useFetchByKey</span><span class="hl-1">(</span><span class="hl-0">ContractTemplate</span><span class="hl-1">, () </span><span class="hl-2">=&gt;</span><span class="hl-1"> </span><span class="hl-0">key</span><span class="hl-1">, [</span><span class="hl-0">dependency1</span><span class="hl-1">, </span><span class="hl-0">dependency2</span><span class="hl-1">, ...]);</span>
</code></pre>

<a href="#usestreamfetchbykey" id="usestreamfetchbykey" style="color: inherit; text-decoration: none;">
  <h2><code>useStreamFetchByKey</code></h2>
</a>
<blockquote>
<p>Deprecated: prefer <code>useStreamFetchByKeys</code></p>
</blockquote>
<p><code>useStreamFetchByKey</code> has the same signature as <code>useFetchByKey</code>, but it constantly keeps refreshing
the result.</p>
<pre><code class="language-typescript"><span class="hl-2">const</span><span class="hl-1"> {</span><span class="hl-8">contract</span><span class="hl-1">, </span><span class="hl-8">loading</span><span class="hl-1">} = </span><span class="hl-5">useStreamFetchByKey</span><span class="hl-1">(</span><span class="hl-0">ContractTemplate</span><span class="hl-1">, () </span><span class="hl-2">=&gt;</span><span class="hl-1"> </span><span class="hl-0">key</span><span class="hl-1">, [</span><span class="hl-0">dependency1</span><span class="hl-1">, </span><span class="hl-0">dependency2</span><span class="hl-1">, ...]);</span>
</code></pre>

<a href="#usestreamfetchbykeys" id="usestreamfetchbykeys" style="color: inherit; text-decoration: none;">
  <h2><code>useStreamFetchByKeys</code></h2>
</a>
<p><code>useStreamFetchByKeys</code> takes a template and a factory that returns a list of
keys, and returns a list of contracts that correspond to those keys (or null if
no contract matches the corresponding key). This hook will keep an open
WebSocket connection and listen for any change to the corresponding contracts.</p>
<p>If the factory function returns an empty array, the hook will similarly produce
an empty array of contracts.</p>
<pre><code class="language-typescript"><span class="hl-2">const</span><span class="hl-1"> {</span><span class="hl-8">contracts</span><span class="hl-1">, </span><span class="hl-8">loading</span><span class="hl-1">} = </span><span class="hl-5">useStreamFetchByKeys</span><span class="hl-1">(</span><span class="hl-0">ContractTemplate</span><span class="hl-1">,</span><br/><span class="hl-1">                                                  () </span><span class="hl-2">=&gt;</span><span class="hl-1"> [</span><span class="hl-0">key1</span><span class="hl-1">, </span><span class="hl-0">key2</span><span class="hl-1">, ...],</span><br/><span class="hl-1">                                                  [</span><span class="hl-0">dependency1</span><span class="hl-1">, </span><span class="hl-0">dependency2</span><span class="hl-1">, ...]);</span>
</code></pre>
<p>You can additionally pass in an extra function to handle WebSocket connection
failures.</p>

<a href="#advanced-usage" id="advanced-usage" style="color: inherit; text-decoration: none;">
  <h2>Advanced Usage</h2>
</a>
<p>In order to interact as multiple parties or to connect to several ledgers, one needs to create an extra
<code>DamlLedger</code> <a href="https://reactjs.org/docs/context.html">contexts</a> specific to your requirement.</p>

<a href="#createledgercontext" id="createledgercontext" style="color: inherit; text-decoration: none;">
  <h2><code>createLedgerContext</code></h2>
</a>
<p><code>createLedgerContext</code> returns another <code>DamlLedger</code> context and associated hooks (<code>useParty</code>, <code>useLedger</code> ... etc)
that will look up their connection within that returned context.</p>

<a href="#source" id="source" style="color: inherit; text-decoration: none;">
  <h2>Source</h2>
</a>
<p><a href="https://github.com/digital-asset/daml">https://github.com/digital-asset/daml</a>.</p>

<a href="#license" id="license" style="color: inherit; text-decoration: none;">
  <h2>License</h2>
</a>
<p><a href="License">Apache-2.0</a></p>
</div></div><div class="col-4 col-menu menu-sticky-wrap menu-highlight"><nav class="tsd-navigation primary"><ul><li class="current"><a href="modules.html">Exports</a></li></ul></nav><nav class="tsd-navigation secondary menu-sticky"><ul><li class="tsd-kind-type-alias tsd-has-type-parameter"><a href="modules.html#FetchByKeysResult" class="tsd-kind-icon">Fetch<wbr/>By<wbr/>Keys<wbr/>Result</a></li><li class="tsd-kind-type-alias tsd-has-type-parameter"><a href="modules.html#FetchResult" class="tsd-kind-icon">Fetch<wbr/>Result</a></li><li class="tsd-kind-type-alias"><a href="modules.html#LedgerContext" class="tsd-kind-icon">Ledger<wbr/>Context</a></li><li class="tsd-kind-type-alias tsd-has-type-parameter tsd-is-external"><a href="modules.html#QueryResult" class="tsd-kind-icon">Query<wbr/>Result</a></li><li class="tsd-kind-function"><a href="modules.html#createLedgerContext" class="tsd-kind-icon">create<wbr/>Ledger<wbr/>Context</a></li><li class="tsd-kind-function"><a href="modules.html#default" class="tsd-kind-icon">default</a></li><li class="tsd-kind-function tsd-has-type-parameter"><a href="modules.html#useFetch" class="tsd-kind-icon">use<wbr/>Fetch</a></li><li class="tsd-kind-function tsd-has-type-parameter"><a href="modules.html#useFetchByKey" class="tsd-kind-icon">use<wbr/>Fetch<wbr/>By<wbr/>Key</a></li><li class="tsd-kind-function"><a href="modules.html#useLedger" class="tsd-kind-icon">use<wbr/>Ledger</a></li><li class="tsd-kind-function"><a href="modules.html#useParty" class="tsd-kind-icon">use<wbr/>Party</a></li><li class="tsd-kind-function tsd-has-type-parameter"><a href="modules.html#useQuery" class="tsd-kind-icon">use<wbr/>Query</a></li><li class="tsd-kind-function"><a href="modules.html#useReload" class="tsd-kind-icon">use<wbr/>Reload</a></li><li class="tsd-kind-function tsd-has-type-parameter"><a href="modules.html#useStreamFetchByKey" class="tsd-kind-icon">use<wbr/>Stream<wbr/>Fetch<wbr/>By<wbr/>Key</a></li><li class="tsd-kind-function tsd-has-type-parameter"><a href="modules.html#useStreamFetchByKeys" class="tsd-kind-icon">use<wbr/>Stream<wbr/>Fetch<wbr/>By<wbr/>Keys</a></li><li class="tsd-kind-function tsd-has-type-parameter"><a href="modules.html#useStreamQueries" class="tsd-kind-icon">use<wbr/>Stream<wbr/>Queries</a></li><li class="tsd-kind-function tsd-has-type-parameter"><a href="modules.html#useStreamQuery" class="tsd-kind-icon">use<wbr/>Stream<wbr/>Query</a></li><li class="tsd-kind-function"><a href="modules.html#useUser" class="tsd-kind-icon">use<wbr/>User</a></li></ul></nav></div></div></div><footer class="with-border-bottom"><div class="container"><h2>Settings</h2><p>Theme <select id="theme"><option value="os">OS</option><option value="light">Light</option><option value="dark">Dark</option></select></p></div></footer><div class="container tsd-generator"><p>Generated using <a href="https://typedoc.org/" target="_blank">TypeDoc</a></p></div><div class="overlay"></div><script src="assets/main.js"></script></body></html>